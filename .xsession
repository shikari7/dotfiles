#!/bin/sh
#
# DO NOT EDIT THIS FILE UNLESS YOU FULLY UNDESTAND IT!
#
# If you want to run more clients on your session, please add them
# into the file ".xsession-add" (note the leading dot) possibly
# creating that file if you do not already have it.  Remember to
# start all programs into the background by placing an ampersand (&)
# at the end of each command.  Remember to make the file executable
#
#	chmod a+rx $HOME/.xsession-add
#
# If you want to replace the standard DESCO session with your own,
# put all of your commands into the file ".xinitrc" and make that
# file executable.  You should include a session leader (something
# not in the background) at the end of the script.  Your session
# will end when that program exits.
#
# -------------------------------------------------------------------
#
# Get all the symbols from xrdb and turn them into shell variables.
#
eval `xrdb -symbols | \
      sed -e 's/[ 	]*-D/;/g' |
      tr ';' '\012' |
      sed -e 's/^HOST=.*//' \
	  -e '/^[ 	]*$/d' \
	  -e 's/^\([^=]*\)$/\1=1/' |
      tr '\012' ';'`
dim=${WIDTH}x${HEIGHT}
HOST="${HOST-`hostname`}" export HOST
initdir=/usr/local/lib/initfiles
#
# Check to see whether secure shell is to be used.
#
if [ -d $HOME/.ssh ]
then	EXEC="exec ssh-agent"
else	EXEC="exec"
fi
#
# An executable $HOME/.xinitrc replaces a normal DESCO session.
#
# Otherwise run additional clients from $HOME/.xsession-add, and
# start the standard DESCO session for the dimensions of the display.
#
# If there is no standard session, run only an xterm.
#
#if [ -x $HOME/.xinitrc ]
#then	$EXEC $HOME/.xinitrc
if [ -x $HOME/.xsession ]
then	$EXEC $HOME/.xsession
else	if [ -x $HOME/.xsession-add ]
	then	. $HOME/.xsession-add
	fi
	if [ -r $initdir/X11/Xsession-$dim ]
	then	$EXEC $initdir/X11/Xsession-$dim
	else	$EXEC xterm -geometry 80x24+0-60 -ls
	fi
fi
